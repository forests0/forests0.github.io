(this["webpackJsonpfind-mine"]=this["webpackJsonpfind-mine"]||[]).push([[0],{20:function(e,t,a){},21:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var c=a(2),r=a(11),n=(a(20),a(21),a(6)),l=a(4),s=a(3),u=a(7),o=a(5),i=a(1),b=function(e){switch(e){case I.NORMAL:case I.MINE:return{background:"#444"};case I.CLICKED_MINE:return{background:"red"};case I.OPENED:return{background:"white"};case I.QUESTION_MINE:case I.QUESTION:return{background:"yellow"};case I.FLAG_MINE:case I.FLAG:return{background:"green"};default:return{background:"white"}}},O=function(e){switch(e){case I.NORMAL:case I.MINE:return"";case I.CLICKED_MINE:return Object(i.jsx)(u.a,{icon:o.a});case I.FLAG_MINE:case I.FLAG:return Object(i.jsx)(u.a,{icon:o.b});case I.QUESTION_MINE:case I.QUESTION:return Object(i.jsx)(u.a,{icon:o.c});default:return e||""}},j=Object(c.memo)((function(e){var t=e.rowIndex,a=e.cellIndex,r=Object(c.useContext)(h),n=r.tableData,l=r.dispatch,s=r.halted,u=Object(c.useCallback)((function(){if(console.log(s),!s)switch(n[t][a]){case I.OPENED:case I.FLAG_MINE:case I.FLAG:case I.QUESTION_MINE:case I.QUESTION:return;case I.NORMAL:return void l({type:w,row:t,cell:a});case I.MINE:return void l({type:p,row:t,cell:a});default:return}}),[n,a,t,l,s]),o=Object(c.useCallback)((function(e){if(e.preventDefault(),!s)switch(n[t][a]){case I.OPENED:return;case I.NORMAL:case I.MINE:return void l({type:m,row:t,cell:a});case I.FLAG_MINE:case I.FLAG:return void l({type:D,row:t,cell:a});case I.QUESTION_MINE:case I.QUESTION:return void l({type:L,row:t,cell:a});default:return}}),[n,a,t,l,s]);return Object(i.jsx)("td",{style:b(n[t][a]),onClick:u,onContextMenu:o,children:O(n[t][a])})})),E=function(e){var t=e.rowIndex,a=Object(c.useContext)(h).tableData;return Object(i.jsx)("tr",{children:a[0]&&Array(a[0].length).fill().map((function(e,a){return Object(i.jsx)(j,{rowIndex:t,cellIndex:a})}))})},N=function(){var e=Object(c.useContext)(h).tableData;return Object(i.jsx)("table",{children:Array(e.length).fill().map((function(e,t){return Object(i.jsx)(E,{rowIndex:t})}))})},d=(a(25),Object(c.memo)((function(){var e=Object(c.useState)(10),t=Object(n.a)(e,2),a=t[0],r=t[1],l=Object(c.useState)(10),s=Object(n.a)(l,2),u=s[0],o=s[1],b=Object(c.useState)(20),O=Object(n.a)(b,2),j=O[0],E=O[1],N=Object(c.useContext)(h).dispatch,d=Object(c.useCallback)((function(e){r(e.target.value)}),[]),I=Object(c.useCallback)((function(e){o(e.target.value)}),[]),f=Object(c.useCallback)((function(e){E(e.target.value)}),[]),M=Object(c.useCallback)((function(){N({type:v,row:a,cell:u,mine:j})}),[N,a,u,j]);return Object(i.jsxs)("div",{class:"set-option",children:[Object(i.jsx)("input",{className:"set-cell--in",type:"number",placeholder:"\uc138\ub85c",value:a,onChange:d}),Object(i.jsx)("input",{className:"set-row--in",type:"number",placeholder:"\uac00\ub85c",value:u,onChange:I}),Object(i.jsx)("input",{className:"set-mine--in",type:"number",placeholder:"\uc9c0\ub8b0",value:j,onChange:f}),Object(i.jsx)("button",{onClick:M,className:"set-start",children:"\uc2dc\uc791"})]})}))),I={MINE:-7,NORMAL:-1,QUESTION:-2,FLAG:-3,QUESTION_MINE:-4,FLAG_MINE:-5,CLICKED_MINE:-6,OPENED:0},h=Object(c.createContext)({tableData:[],dispatch:function(){},halted:!0}),f={tableData:[],timer:0,result:"",halted:!0,gameData:{row:0,cell:0,mine:0},isWin:!1},M=function(e,t,a){for(var c=[],r=[],n=0;n<a;){var l=Math.floor(Math.random()*(e*t));!1===r.includes(l)&&(r.push(l),n++)}for(var s=0;s<e;s++){var u=[];c.push(u);for(var o=0;o<t;o++)u.push(I.NORMAL)}for(var i=0;i<r.length;i++){var b=Math.floor(r[i]/t),O=r[i]%t;c[b][O]=I.MINE}return c},v="START_GAME",w="OPEN_CELL",p="CLICK_MINE",m="FLAG_CELL",D="QUESTION_CELL",L="NORMAL_CELL",x="INCREMENT_TIMER",C=function(e,t){switch(t.type){case v:return Object(s.a)(Object(s.a)({},e),{},{tableData:M(t.row,t.cell,t.mine),halted:!1,gameData:{row:t.row,cell:t.cell,mine:t.mine},timer:0,result:"",isWin:!1});case w:var a=Object(l.a)(e.tableData);a.forEach((function(e,t){a[t]=Object(l.a)(e)}));var c=[],r=0;!function e(t,r){if(!(t<0||t>=a.length||r<0||r>=a[0].length)&&![I.FLAG,I.FLAG_MINE,I.OPENED,I.QUESTION,I.QUESTION_MINE].includes(a[t][r])&&!c.includes(t+","+r)){c.push(t+","+r);var n=[];a[t-1]&&(n=n.concat([a[t-1][r-1],a[t-1][r],a[t-1][r+1]])),n=n.concat([a[t][r-1],a[t][r+1]]),a[t+1]&&(n=n.concat([a[t+1][r-1],a[t+1][r],a[t+1][r+1]]));var l=n.filter((function(e){return[I.FLAG_MINE,I.MINE,I.QUESTION_MINE].includes(e)})).length;if(0===l&&t>-1){var s=[];t-1>-1&&(s.push([t-1,r-1]),s.push([t-1,r]),s.push([t-1,r+1])),s.push([t,r-1]),s.push([t,r+1]),t+1<a.length&&(s.push([t+1,r-1]),s.push([t+1,r]),s.push([t+1,r+1])),s.forEach((function(t){a[t[0]][t[1]]!==I.OPENED&&e(t[0],t[1])}))}a[t][r]=l}}(t.row,t.cell),a.forEach((function(e,t){e.forEach((function(e,t){e>=0&&(r+=1)}))}));var n=!1,u="",o=!1;return r===e.gameData.row*e.gameData.cell-e.gameData.mine&&(n=!0,u=Object(i.jsxs)("div",{children:["You won in ",e.timer," seconds!!"]}),o=!0),Object(s.a)(Object(s.a)({},e),{},{tableData:a,halted:n,result:u,isWin:o});case p:var b=Object(l.a)(e.tableData);b[t.row]=Object(l.a)(e.tableData[t.row]),b[t.row][t.cell]=I.CLICKED_MINE;for(var O=0;O<e.gameData.row;O++)for(var j=0;j<e.gameData.cell;j++)b[O][j]!==I.MINE&&b[O][j]!==I.FLAG_MINE||(b[O][j]=I.CLICKED_MINE);return Object(s.a)(Object(s.a)({},e),{},{tableData:b,halted:!0});case m:var E=Object(l.a)(e.tableData);return E[t.row]=Object(l.a)(e.tableData[t.row]),E[t.row][t.cell]=E[t.row][t.cell]===I.MINE?I.FLAG_MINE:I.FLAG,Object(s.a)(Object(s.a)({},e),{},{tableData:E});case D:var N=Object(l.a)(e.tableData);return N[t.row]=Object(l.a)(e.tableData[t.row]),N[t.row][t.cell]=N[t.row][t.cell]===I.FLAG_MINE?I.QUESTION_MINE:I.QUESTION,Object(s.a)(Object(s.a)({},e),{},{tableData:N});case L:var d=Object(l.a)(e.tableData);return d[t.row]=Object(l.a)(e.tableData[t.row]),d[t.row][t.cell]=d[t.row][t.cell]===I.QUESTION_MINE?I.MINE:I.NORMAL,Object(s.a)(Object(s.a)({},e),{},{tableData:d});case x:return Object(s.a)(Object(s.a)({},e),{},{timer:e.timer+1});default:return e}},A=function(){var e=Object(c.useReducer)(C,f),t=Object(n.a)(e,2),a=t[0],r=t[1],l=a.tableData,s=a.halted,b=a.timer,O=a.result,j=Object(c.useMemo)((function(){return{tableData:l,halted:s,dispatch:r}}),[l,s]);return Object(c.useEffect)((function(){var e;return s||(e=setInterval((function(){r({type:x})}),1e3)),function(){clearInterval(e)}}),[s]),Object(i.jsxs)(h.Provider,{value:j,children:[Object(i.jsx)(d,{}),Object(i.jsxs)("div",{class:"timer",children:[Object(i.jsx)(u.a,{icon:o.d})," ",b]}),Object(i.jsx)(N,{}),a.isWin?Object(i.jsxs)("div",{class:"result-win",children:[" ",O]}):Object(i.jsx)("div",{class:"result-fail",children:O})]})};function _(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(A,{})})}var g=document.getElementById("root");Object(r.createRoot)(g).render(Object(i.jsx)(c.StrictMode,{children:Object(i.jsx)(_,{})}))}},[[26,1,2]]]);
//# sourceMappingURL=main.40af09f4.chunk.js.map